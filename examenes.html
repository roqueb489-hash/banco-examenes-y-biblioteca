<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Banco de Exámenes - IEP San Luis Gonzaga</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
:root{
  --bg: #001f3f;
  --card: #003366;
  --accent: #ff0000;
  --gold: #ffd700;
  --text: #f0f8ff;
  --header: rgba(0,31,63,0.96);
  --filter-active: var(--accent);
}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  font-family:'Inter',sans-serif;
  background:var(--bg);
  color:var(--text);
  min-height:100vh;
  padding-top:85px;
  padding-bottom:90px; /* Espacio para la nueva barra inferior */
  display:flex;
  flex-direction:column;
  align-items:center;
}
header{
  position:fixed;top:0;left:0;right:0;
  background:var(--header);
  backdrop-filter:blur(15px);
  padding:1rem;
  text-align:center;
  z-index:999;
  box-shadow:0 6px 30px rgba(0,0,0,0.5);
  width:100%;
  display:flex;
  align-items:center;
  justify-content:center;
}
.header-content{
  display:flex;
  align-items:center;
  gap:12px;
  max-width:90%;
}
.header-content img{
  width:58px;height:58px;border-radius:12px;object-fit:contain;
}
header h1{
  font-size:clamp(1.8rem,5vw,2.8rem);
  background:linear-gradient(90deg, var(--gold), var(--accent));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  font-weight:900;
  margin:0;
}

/* MENÚ LATERAL PC (igual que antes, mejorado) */
.menu-btn{
  position:fixed;top:18px;left:18px;width:58px;height:58px;
  background:var(--gold);color:#000;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:1.9rem;cursor:pointer;z-index:1001;
  box-shadow:0 10px 30px rgba(255,215,0,0.6);transition:.3s;
}
.menu-btn:hover{transform:scale(1.15)}
.menu-btn.active{background:var(--accent);color:white}

.sidebar{
  position:fixed;top:0;left:-360px;width:360px;height:100%;
  background:linear-gradient(135deg,#002b55,#001f3f);
  box-shadow:12px 0 50px rgba(0,0,0,0.8);
  z-index:1000;padding:30px;transition:left .45s cubic-bezier(0.68,-.55,.27,1.55);
  display:flex;flex-direction:column;overflow-y:auto;
}
.sidebar.active{left:0}
.overlay{
  position:fixed;inset:0;background:rgba(0,0,0,0.8);
  opacity:0;visibility:hidden;transition:.3s;z-index:999;
}
.overlay.active{opacity:1;visibility:visible}

.sidebar .logo img{
  width:220px;padding:16px;background:rgba(255,215,0,0.15);
  border:3px solid var(--gold);border-radius:30px;
  box-shadow:0 15px 40px rgba(255,215,0,0.4);margin:0 auto 30px;display:block;
}
.volver-btn{
  display:block;width:88%;margin:25px auto 35px;padding:18px;
  background:var(--accent);color:white;text-align:center;
  border-radius:24px;font-weight:800;font-size:1.1rem;text-decoration:none;
  box-shadow:0 12px 35px rgba(255,0,0,0.5);transition:.3s;
}
.volver-btn:hover{transform:translateY(-6px);box-shadow:0 18px 45px rgba(255,0,0,0.6);}

.sidebar ul{
  list-style:none;margin-top:20px;
}
.sidebar ul li{
  margin-bottom:8px;
}
.sidebar ul li a{
  display:flex;align-items:center;padding:18px 22px;
  color:var(--text);font-weight:700;font-size:1.05rem;
  text-decoration:none;border-radius:18px;
  transition:all .35s;background:rgba(255,255,255,0.05);
}
.sidebar ul li a i{
  font-size:1.6rem;margin-right:16px;width:36px;text-align:center;
}
.sidebar ul li a:hover{
  background:rgba(255,215,0,0.15);color:var(--gold);transform:translateX(8px);
}
.sidebar ul li a.active{
  background:var(--accent);color:white;box-shadow:0 8px 25px rgba(255,0,0,0.5);
  transform:translateX(4px);
}

/* NUEVA BARRA INFERIOR FIJA PARA MÓVIL */
.mobile-bottom-nav{
  position:fixed;bottom:0;left:0;right:0;
  background:rgba(0,31,63,0.98);backdrop-filter:blur(15px);
  padding:10px 0;border-top:1px solid rgba(255,215,0,0.2);
  z-index:998;display:none;box-shadow:0 -10px 30px rgba(0,0,0,0.6);
}
.mobile-bottom-nav .nav-grid{
  display:grid;grid-template-columns:repeat(6,1fr);gap:4px;padding:0 10px;
}
.mobile-bottom-nav a{
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  color:var(--text);text-decoration:none;font-size:0.75rem;font-weight:700;
  padding:8px 4px;border-radius:12px;transition:.3s;
}
.mobile-bottom-nav a i{
  font-size:1.6rem;margin-bottom:4px;
}
.mobile-bottom-nav a:hover{
  background:rgba(255,215,0,0.15);color:var(--gold);
}
.mobile-bottom-nav a.active{
  color:var(--accent);
}
.mobile-bottom-nav a.volver{
  grid-column:span 6;background:var(--accent);color:white;margin-top:8px;
  padding:12px;border-radius:16px;font-size:0.9rem;
}
.mobile-bottom-nav a.volver i{font-size:1.8rem;}

/* FILTRO Y CONTENIDO (igual) */
.filter-bar{
  display:flex;justify-content:center;flex-wrap:wrap;gap:12px;
  margin:1rem 0 2rem;padding:0 1rem;
  width:100%;max-width:800px;
}
.filter-btn{
  background:rgba(255,255,255,0.1);color:var(--text);
  border:2px solid transparent;padding:0.75rem 1.6rem;
  border-radius:50px;font-weight:700;font-size:0.95rem;
  cursor:pointer;transition:.3s;
}
.filter-btn:hover{
  background:var(--gold);color:#000;transform:translateY(-3px);
}
.filter-btn.active{
  background:var(--filter-active);color:white;border-color:var(--filter-active);
}

.container{max-width:1400px;margin:0 auto;padding:1rem 1rem;width:100%;}
.section-title{
  font-size:clamp(2.5rem,7vw,3.6rem);text-align:center;
  margin:3rem 0 1rem;padding-top:100px;margin-top:-100px;
  background:linear-gradient(90deg,var(--gold),var(--accent));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  font-weight:900;scroll-margin-top:140px;
}
.cards{
  display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
  gap:2rem;margin-bottom:3rem;
  justify-items:center;
}
.card{
  background:var(--card);border-radius:28px;overflow:hidden;
  box-shadow:0 15px 45px rgba(0,0,0,0.5);transition:.4s;
  opacity:1;transform:translateY(0);width:100%;max-width:340px;
}
.card.hidden{
  opacity:0;transform:translateY(20px);pointer-events:none;height:0;
  margin:0;padding:0;overflow:hidden;
}
.card:hover{transform:translateY(-16px);box-shadow:0 35px 80px rgba(255,0,0,0.45);}
.card img{width:100%;height:220px;object-fit:cover;background:var(--card);}
.card-content{padding:1.4rem 1.2rem;}
.card h3{font-size:1.45rem;text-align:center;margin-bottom:8px;font-weight:700;}
.year-tag{text-align:center;font-size:0.95rem;color:var(--gold);font-weight:700;margin-bottom:12px;opacity:0.9;}
.btns{padding:1.3rem;display:flex;gap:14px;justify-content:center;}
.btn{padding:0.95rem 2.1rem;border-radius:18px;font-weight:700;text-decoration:none;}
.ver{background:var(--accent);color:white}
.desc{background:var(--gold);color:#000}

.subir{
  background:var(--card);border:4px dashed var(--gold);
  border-radius:28px;padding:3rem 1rem;text-align:center;
  margin:3rem auto;max-width:90%;width:100%;
}
.subir button{
  background:var(--gold);color:#000;padding:1.2rem 4rem;
  border:none;border-radius:50px;font-size:1.4rem;font-weight:900;
  cursor:pointer;box-shadow:0 15px 40px rgba(255,215,0,0.7);transition:.3s;
}
.subir button:hover{transform:scale(1.06);background:var(--accent);color:white;}

/* RESPONSIVE */
@media (max-width:1024px){
  .menu-btn,.sidebar,.overlay{display:none!important;}
  .mobile-bottom-nav{display:block;}
  body{padding-bottom:140px;}
  .cards{gap:1.5rem;}
  .card{max-width:100%;}
  .filter-bar{gap:8px;}
  .filter-btn{padding:0.6rem 1.2rem;font-size:0.9rem;}
}
@media (min-width:1025px){
  .mobile-bottom-nav{display:none!important;}
}
</style>
</head>
<body>

<!-- Overlay PC -->
<div class="overlay" onclick="cerrarMenu()"></div>

<!-- Menú PC (lateral) -->
<div class="menu-btn" onclick="toggleMenu()"><i class="fas fa-bars"></i></div>
<nav class="sidebar" id="sidebar">
  <div class="logo">
    <img src="https://raw.githubusercontent.com/roqueb489-hash/banco-examenes-y-biblioteca/main/Insignia-New-cuadrado.png" alt="IEP San Luis Gonzaga">
  </div>
  <a href="index.html" class="volver-btn"><i class="fas fa-home"></i> VOLVER A LA BIBLIOTECA</a>
  <ul>
    <li><a href="#area1"><i class="fas fa-brain"></i> Área I</a></li>
    <li><a href="#area2"><i class="fas fa-calculator"></i> Área II</a></li>
    <li><a href="#area3"><i class="fas fa-flask"></i> Área III</a></li>
    <li><a href="#area4"><i class="fas fa-book"></i> Área IV</a></li>
    <li><a href="#area5"><i class="fas fa-globe"></i> Área V</a></li>
    <li><a href="#area6"><i class="fas fa-trophy"></i> Concursos</a></li>
  </ul>
</nav>

<!-- NUEVA BARRA INFERIOR FIJA PARA MÓVIL -->
<nav class="mobile-bottom-nav">
  <div class="nav-grid">
    <a href="#area1"><i class="fas fa-brain"></i><span>Área I</span></a>
    <∙a href="#area2"><i class="fas fa-calculator"></i><span>Área II</span></a>
    <a href="#area3"><i class="fas fa-flask"></i><span>Área III</span></a>
    <a href="#area4"><i class="fas fa-book"></i><span>Área IV</span></a>
    <a href="#area5"><i class="fas fa-globe"></i><span>Área V</span></a>
    <a href="#area6"><i class="fas fa-trophy"></i><span>Concursos</span></a>
    <a href="index.html" class="volver"><i class="fas fa-home"></i> VOLVER A LA BIBLIOTECA</a>
  </div>
</nav>

<!-- Header con logo -->
<header>
  <div class="header-content">
    <img src="https://raw.githubusercontent.com/roqueb489-hash/banco-examenes-y-biblioteca/main/Insignia-New-cuadrado.png" alt="IEP San Luis Gonzaga">
    <h1>BANCO DE EXÁMENES</h1>
  </div>
</header>

<div class="container">
  <div class="loading" id="loading">Cargando exámenes...</div>

  <!-- ÁREAS -->
  <h2 class="section-title" id="area1">Área I</h2>
  <div class="filter-bar" id="filter-area1"></div>
  <div class="cards" id="cont-area1"></div>
  <div class="subir"><button onclick="window.open('https://drive.google.com/drive/folders/18QPIPzEixyoOEQpS7AJwz5pVZnlO_buZ','_blank')"><i class="fas fa-upload"></i> SUBIR EXAMEN ÁREA I</button></div>

  <h2 class="section-title" id="area2">Área II</h2>
  <div class="filter-bar" id="filter-area2"></div>
  <div class="cards" id="cont-area2"></div>
  <div class="subir"><button onclick="window.open('https://drive.google.com/drive/folders/1i6XARtZklKOQlIyI_lvpnV52Bw8IgZmp','_blank')"><i class="fas fa-upload"></i> SUBIR EXAMEN ÁREA II</button></div>

  <h2 class="section-title" id="area3">Área III</h2>
  <div class="filter-bar" id="filter-area3"></div>
  <div class="cards" id="cont-area3"></div>
  <div class="subir"><button onclick="window.open('https://drive.google.com/drive/folders/1w_sXgXEfhZ3PYCuEri00JtI5CdfU5F1N','_blank')"><i class="fas fa-upload"></i> SUBIR EXAMEN ÁREA III</button></div>

  <h2 class="section-title" id="area4">Área IV</h2>
  <div class="filter-bar" id="filter-area4"></div>
  <div class="cards" id="cont-area4"></div>
  <div class="subir"><button onclick="window.open('https://drive.google.com/drive/folders/16oCtaxlZHPnIpq2q-b4JPHihW3seYuWU','_blank')"><i class="fas fa-upload"></i> SUBIR EXAMEN ÁREA IV</button></div>

  <h2 class="section-title" id="area5">Área V</h2>
  <div class="filter-bar" id="filter-area5"></div>
  <div class="cards" id="cont-area5"></div>
  <div class="subir"><button onclick="window.open('https://drive.google.com/drive/folders/1SJxoxe9yJP-ianUI0GNK_VrcuvtWdf77','_blank')"><i class="fas fa-upload"></i> SUBIR EXAMEN ÁREA V</button></div>

  <h2 class="section-title" id="area6">Concursos Interescolares</h2>
  <div class="filter-bar" id="filter-area6"></div>
  <div class="cards" id="cont-area6"></div>
  <div class="subir"><button onclick="window.open('https://drive.google.com/drive/folders/1OOWIKgEenaueVSBsGYatXcJGmPcHrF3D','_blank')"><i class="fas fa-upload"></i> SUBIR EXAMEN DE CONCURSO</button></div>
</div>

<script>
const DEPLOY_URL = "https://script.google.com/macros/s/AKfycbxoPNW7IPyuiP1nUxkhiWCDnYtLFNO4iv-YXaHQPyuGsaRJ3vsBWJnUWyro1I1Q6eCw2w/exec";
const CARPETAS = [
  "18QPIPzEixyoOEQpS7AJwz5pVZnlO_buZ",
  "1i6XARtZklKOQlIyI_lvpnV52Bw8IgZmp",
  "1w_sXgXEfhZ3PYCuEri00JtI5CdfU5F1N",
  "16oCtaxlZHPnIpq2q-b4JPHihW3seYuWU",
  "1SJxoxe9yJP-ianUI0GNK_VrcuvtWdf77",
  "1OOWIKgEenaueVSBsGYatXcJGmPcHrF3D"
];
const contenedores = [1,2,3,4,5,6].map(n => document.getElementById('cont-area'+n));
const filtros = [1,2,3,4,5,6].map(n => document.getElementById('filter-area'+n));

function toggleMenu(){
  document.getElementById('sidebar').classList.toggle('active');
  document.querySelector('.overlay').classList.toggle('active');
  document.querySelector('.menu-btn').classList.toggle('active');
}
function cerrarMenu(){
  document.getElementById('sidebar').classList.remove('active');
  document.querySelector('.overlay').classList.remove('active');
  document.querySelector('.menu-btn').classList.remove('active');
}

// Resaltar ítem activo en barra inferior y menú lateral
window.addEventListener('scroll', () => {
  let current = '';
  document.querySelectorAll('.section-title').forEach(sec => {
    if (window.scrollY >= sec.offsetTop - 180) current = sec.id;
  });
  document.querySelectorAll('.sidebar a, .mobile-bottom-nav a').forEach(a => {
    a.classList.toggle('active', a.getAttribute('href') === `#${current}`);
  });
});

async function cargarTodo() {
  for (let i = 0; i < 6; i++) {
    try {
      const res = await fetch(`${DEPLOY_URL}?carpeta=${CARPETAS[i]}`);
      let archivos = await res.json();

      archivos.sort((a, b) => new Date(b.modifiedTime) - new Date(a.modifiedTime));

      if (archivos.length === 0) {
        contenedores[i].innerHTML = '<p style="grid-column:1/-1;text-align:center;padding:6rem;color:#a9a9a9;font-size:1.4rem">Aún no hay exámenes</p>';
        continue;
      }

      const años = [...new Set(archivos.map(f => new Date(f.modifiedTime).getFullYear()))].sort((a,b) => b-a);

      let filterHTML = `<button class="filter-btn active" data-year="all">Todos</button>`;
      años.forEach(year => {
        filterHTML += `<button class="filter-btn" data-year="${year}">${year}</button>`;
      });
      filtros[i].innerHTML = filterHTML;

      archivos.forEach(f => {
        const nombre = f.name.replace(/\.pdf$/i, '');
        const fecha = new Date(f.modifiedTime);
        const año = fecha.getFullYear();

        contenedores[i].innerHTML += `
          <div class="card" data-year="${año}">
            <img src="https://drive.google.com/thumbnail?id=${f.id}&sz=w800" alt="${nombre}"
                 onerror="this.src='https://via.placeholder.com/400x220/003366/ffd700?text=EXAMEN'">
            <div class="card-content">
              <h3>${nombre}</h3>
              <div class="year-tag">Año ${año}</div>
              <div class="btns">
                <a href="https://drive.google.com/file/d/${f.id}/preview" target="_blank" class="btn ver">VER</a>
                <a href="https://drive.google.com/uc?id=${f.id}&export=download" class="btn desc">DESCARGAR</a>
              </div>
            </div>
          </div>`;
      });

      filtros[i].querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const year = btn.getAttribute('data-year');
          filtros[i].querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');

          contenedores[i].querySelectorAll('.card').forEach(card => {
            const cardYear = card.getAttribute('data-year');
            card.classList.toggle('hidden', year !== 'all' && cardYear !== year);
          });
        });
      });

    } catch (e) {
      contenedores[i].innerHTML = '<p style="color:#ff0000;text-align:center;padding:4rem">Error al cargar</p>';
    }
  }
  document.getElementById('loading').style.display = 'none';
}

cargarTodo();
</script>
</body>
</html>
