<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Biblioteca Digital Sanluisina | IEP San Luis Gonzaga</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root{
      --bg: #001f3f;
      --card: #003366;
      --accent: #dc2626;
      --gold: #FFD700;
      --text: #f0f8ff;
      --header: rgba(0,31,63,0.96);
      --p: #003087;
    }
    *{margin:0;padding:0;box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      font-family:'Inter',sans-serif;
      background:var(--bg);
      color:var(--text);
      min-height:100vh;
      padding-top:85px;
      padding-bottom:100px;
      display:flex;
      flex-direction:column;
      align-items:center;
    }
    header{
      position:fixed;top:0;left:0;right:0;
      background:var(--header);
      backdrop-filter:blur(15px);
      padding:1rem;
      text-align:center;
      z-index:999;
      box-shadow:0 6px 30px rgba(0,0,0,0.5);
      width:100%;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .header-content{
      display:flex;
      align-items:center;
      gap:12px;
      max-width:95%;
    }
    .header-content img{
      width:52px;height:52px;border-radius:12px;object-fit:contain;flex-shrink:0;
    }
    header h1{
      font-size:clamp(1.6rem,5vw,2.8rem);
      background:linear-gradient(90deg, var(--gold), var(--p));
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      font-weight:900;
      margin:0;
    }
    .menu-btn{
      position:fixed;top:18px;left:18px;width:58px;height:58px;
      background:var(--gold);color:#000;border-radius:50%;
      display:flex;align-items:center;justify-content:center;
      font-size:1.9rem;cursor:pointer;z-index:1001;
      box-shadow:0 10px 30px rgba(255,215,0,0.6);transition:.3s;
    }
    .menu-btn:hover{transform:scale(1.15)}
    .menu-btn.active{background:var(--accent);color:white}
    .sidebar{
      position:fixed;top:0;left:-360px;width:360px;height:100%;
      background:linear-gradient(135deg,#002b55,#001f3f);
      box-shadow:12px 0 50px rgba(0,0,0,0.8);
      z-index:1000;padding:30px;transition:left .45s cubic-bezier(0.68,-.55,.27,1.55);
      display:flex;flex-direction:column;overflow-y:auto;
    }
    .sidebar.active{left:0}
    .overlay{
      position:fixed;inset:0;background:rgba(0,0,0,0.45);
      backdrop-filter:blur(8px);
      opacity:0;visibility:hidden;transition:all .4s;z-index:999;
    }
    .overlay.active{opacity:1;visibility:visible}
    .sidebar .logo img{
      width:220px;padding:16px;background:rgba(255,215,0,0.15);
      border:3px solid var(--gold);border-radius:30px;
      box-shadow:0 15px 40px rgba(255,215,0,0.4);margin:0 auto 30px;display:block;
    }
    .volver-btn{
      display:block;width:88%;margin:25px auto 35px;padding:18px;
      background:var(--accent);color:white;text-align:center;
      border-radius:24px;font-weight:800;font-size:1.1rem;text-decoration:none;
      box-shadow:0 12px 35px rgba(255,0,0,0.5);transition:.3s;
    }
    .volver-btn:hover{transform:translateY(-6px);}
    .sidebar ul{list-style:none;margin-top:20px;}
    .sidebar ul li{margin-bottom:8px;}
    .sidebar ul li a{
      display:flex;align-items:center;padding:18px 22px;
      color:var(--text);font-weight:700;font-size:1.05rem;
      text-decoration:none;border-radius:18px;
      transition:all .35s;background:rgba(255,255,255,0.05);
    }
    .sidebar ul li a i{font-size:1.6rem;margin-right:16px;width:36px;text-align:center;}
    .sidebar ul li a:hover{background:rgba(255,215,0,0.15);color:var(--gold);transform:translateX(8px);}
    .sidebar ul li a.active{background:var(--p);color:white;}
    .mobile-bottom-nav{
      position:fixed;bottom:0;left:0;right:0;
      background:rgba(0,31,63,0.97);backdrop-filter:blur(20px);
      padding:8px 0;border-top:1px solid rgba(255,215,0,0.15);
      z-index:998;display:none;box-shadow:0 -8px 25px rgba(0,0,0,0.5);
    }
    .mobile-bottom-nav .nav-grid{
      display:grid;grid-template-columns:repeat(8,1fr);
      gap:4px;padding:0 8px;max-width:700px;margin:0 auto;
    }
    .mobile-bottom-nav a{
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      color:rgba(240,248,255,0.8);text-decoration:none;
      padding:8px 4px;border-radius:12px;transition:.3s;font-size:0.65rem;font-weight:700;
    }
    .mobile-bottom-nav a i{font-size:1.7rem;margin-bottom:3px;}
    .mobile-bottom-nav a:hover{color:var(--gold);background:rgba(255,215,0,0.1);}
    .mobile-bottom-nav a.active{color:var(--accent);}
    .loading{text-align:center;padding:6rem 2rem;font-size:1.6rem;font-weight:700;color:var(--gold);}
    .spinner{width:50px;height:50px;border:5px solid rgba(255,215,0,0.3);border-top:5px solid var(--gold);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 20px;}
    @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
    .container{max-width:1400px;margin:0 auto;padding:1rem;width:100%;}
    .section-title{
      font-size:clamp(2.4rem,6vw,3.4rem);text-align:center;
      margin:3rem 0 2rem;padding-top:100px;margin-top:-100px;
      background:linear-gradient(90deg,var(--gold), var(--p));
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      font-weight:900;scroll-margin-top:140px;
    }
    .cards{
      display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
      gap:2rem;margin-bottom:3rem;justify-items:center;
    }
    .card{
      background:var(--card);border-radius:28px;overflow:hidden;
      box-shadow:0 15px 45px rgba(0,0,0,0.5);transition:.4s;
      width:100%;max-width:340px;
    }
    .card:hover{transform:translateY(-16px);}
    .card img{width:100%;height:220px;object-fit:cover;background:var(--card);}
    .card-content{padding:1.4rem 1.2rem;}
    .card h3{font-size:1.45rem;text-align:center;margin-bottom:12px;font-weight:700;}
    .btns{padding:1.3rem;display:flex;gap:14px;justify-content:center;}
    .btn{padding:0.95rem 2.1rem;border-radius:18px;font-weight:700;text-decoration:none;}
    .ver{background:var(--p);color:white}
    .desc{background:var(--accent);color:white}
    .subir{
      background:var(--card);border:4px dashed var(--gold);
      border-radius:28px;padding:3rem 1rem;text-align:center;
      margin:3rem auto;max-width:90%;width:100%;
    }
    .subir button{
      background:var(--gold);color:#000;padding:1.2rem 4rem;
      border:none;border-radius:50px;font-size:1.4rem;font-weight:900;
      cursor:pointer;box-shadow:0 15px 40px rgba(255,215,0,0.7);transition:.3s;
    }
    .subir button:hover{transform:scale(1.06);background:var(--p);color:white;}
    @media (max-width:1024px){
      .menu-btn,.sidebar,.overlay{display:none!important;}
      .mobile-bottom-nav{display:block;}
      body{padding-bottom:120px;}
    }
    @media (min-width:1025px){.mobile-bottom-nav{display:none!important;}}
  </style>
</head>
<body>
<div class="overlay" onclick="cerrarMenu()"></div>
<div class="menu-btn" onclick="toggleMenu()"><i class="fas fa-bars"></i></div>
<nav class="sidebar" id="sidebar">
  <div class="logo">
    <img src="Insignia-New-cuadrado.png" alt="IEP San Luis Gonzaga"
         onerror="this.src='https://via.placeholder.com/220/003087/white?text=SL'">
  </div>
  <a href="examenes.html" class="volver-btn"><i class="fas fa-file-alt"></i> BANCO DE EXÁMENES</a>
  <ul>
    <li><a href="#seccion1"><i class="fas fa-mountain-sun"></i> Creencias y Tradiciones Huanuqueñas</a></li>
    <li><a href="#seccion2"><i class="fas fa-scroll"></i> Leyendas, Fábulas y Mitos</a></li>
    <li><a href="#seccion3"><i class="fas fa-book-bible"></i> Libros Bíblicos y Religiosos</a></li>
    <li><a href="#seccion4"><i class="fas fa-book"></i> Libros y textos religiosos</a></li>
    <li><a href="#seccion5"><i class="fas fa-book-open"></i> Literatura Huanuqueña</a></li>
    <li><a href="#seccion6"><i class="fas fa-book-open"></i> Literatura Peruana</a></li>
    <li><a href="#seccion7"><i class="fas fa-mountain-sun"></i> Mitos y Creencias Peruanas</a></li>
  </ul>
</nav>
<nav class="mobile-bottom-nav">
  <div class="nav-grid">
    <a href="#seccion1"><i class="fas fa-mountain-sun"></i><span>Creencias</span></a>
    <a href="#seccion2"><i class="fas fa-scroll"></i><span>Leyendas</span></a>
    <a href="#seccion3"><i class="fas fa-book-bible"></i><span>Bíblicos</span></a>
    <a href="#seccion4"><i class="fas fa-book"></i><span>Textos rel.</span></a>
    <a href="#seccion5"><i class="fas fa-book-open"></i><span>Lit. Huanuqueña</span></a>
    <a href="#seccion6"><i class="fas fa-book-open"></i><span>Lit. Peruana</span></a>
    <a href="#seccion7"><i class="fas fa-mountain-sun"></i><span>Mitos</span></a>
    <a href="examenes.html"><i class="fas fa-file-alt"></i><span>Exámenes</span></a>
  </div>
</nav>
<header>
  <div class="header-content">
    <img src="Insignia-New-cuadrado.png" alt="IEP San Luis Gonzaga"
         onerror="this.src='https://via.placeholder.com/52/003087/white?text=SL'">
    <h1>BIBLIOTECA DIGITAL SANLUISINA</h1>
  </div>
</header>
<div class="container">
  <div class="loading" id="loading">
    <div class="spinner"></div>
    Cargando libros...
  </div>

  <h2 class="section-title" id="seccion1">Creencias y Tradiciones Huanuqueñas</h2>
  <div class="cards" id="cont-seccion1"></div>
  <div class="subir"><button onclick="window.open('https://drive.google.com/drive/folders/1z8prGUC0uJ1B_XNHsTzHrqW7hZ7KIAjO','_blank')"><i class="fas fa-upload"></i> SUBIR NUEVO LIBRO</button></div>

  <h2 class="section-title" id="seccion2">Leyendas, Fábulas y Mitos</h2>
  <div class="cards" id="cont-seccion2"></div>
  <div class="subir"><button onclick="window.open('https://drive.google.com/drive/folders/1PYBr9zTjhCBVD8Sv65XAcR_C1_veQtFd','_blank')"><i class="fas fa-upload"></i> SUBIR NUEVO LIBRO</button></div>

  <h2 class="section-title" id="seccion3">Libros Bíblicos y Religiosos</h2>
  <div class="cards" id="cont-seccion3"></div>
  <div class="subir"><button onclick="window.open('https://drive.google.com/drive/folders/1LjGbGaSHk4JZ0ynVwjLLixSanZxcUaXc','_blank')"><i class="fas fa-upload"></i> SUBIR NUEVO LIBRO</button></div>

  <h2 class="section-title" id="seccion4">Libros y textos religiosos</h2>
  <div class="cards" id="cont-seccion4"></div>
  <div class="subir"><button onclick="window.open('https://drive.google.com/drive/folders/1A8BgZZOeDihPMSk9SkwEEMTb_k3-RJFY','_blank')"><i class="fas fa-upload"></i> SUBIR NUEVO LIBRO</button></div>

  <h2 class="section-title" id="seccion5">Literatura Huanuqueña</h2>
  <div class="cards" id="cont-seccion5"></div>
  <div class="subir"><button onclick="window.open('https://drive.google.com/drive/folders/1DevVgGKwPTEtHVbz82RBqfoG-nNMCXZB','_blank')"><i class="fas fa-upload"></i> SUBIR NUEVO LIBRO</button></div>

  <h2 class="section-title" id="seccion6">Literatura Peruana</h2>
  <div class="cards" id="cont-seccion6"></div>
  <div class="subir"><button onclick="window.open('https://drive.google.com/drive/folders/1yHiDEAHdic_ByiL6qax-R26Pd0x5s0pe','_blank')"><i class="fas fa-upload"></i> SUBIR NUEVO LIBRO</button></div>

  <h2 class="section-title" id="seccion7">Mitos y Creencias Peruanas</h2>
  <div class="cards" id="cont-seccion7"></div>
  <div class="subir"><button onclick="window.open('https://drive.google.com/drive/folders/1LddIPgywrGppPGG_A_LNYfyKTVQxOH0-','_blank')"><i class="fas fa-upload"></i> SUBIR NUEVO LIBRO</button></div>
</div>
<script>
  const DEPLOY_URL = "https://script.google.com/macros/s/AKfycbyKMz5v5A2QB5AsbfcRAR0joA_6wf5-SymU0HblhzLH_dvrz3cHLyQThUUAzb1AnkFfRQ/exec";

  const CARPETAS = [
    "1z8prGUC0uJ1B_XNHsTzHrqW7hZ7KIAjO", // Creencias y Tradiciones Huanuqueñas
    "1PYBr9zTjhCBVD8Sv65XAcR_C1_veQtFd", // Leyendas, Fábulas y Mitos
    "1LjGbGaSHk4JZ0ynVwjLLixSanZxcUaXc", // Libros Bíblicos y Religiosos
    "1A8BgZZOeDihPMSk9SkwEEMTb_k3-RJFY", // Libros y textos religiosos
    "1DevVgGKwPTEtHVbz82RBqfoG-nNMCXZB", // Literatura Huanuqueña
    "1yHiDEAHdic_ByiL6qax-R26Pd0x5s0pe", // Literatura Peruana
    "1LddIPgywrGppPGG_A_LNYfyKTVQxOH0-"  // Mitos y Creencias Peruanas
  ];

  const contenedores = [1,2,3,4,5,6,7].map(n => document.getElementById('cont-seccion'+n));

  function toggleMenu(){
    document.getElementById('sidebar').classList.toggle('active');
    document.querySelector('.overlay').classList.toggle('active');
    document.querySelector('.menu-btn').classList.toggle('active');
  }

  window.addEventListener('scroll', () => {
    let current = '';
    document.querySelectorAll('.section-title').forEach(sec => {
      if (window.scrollY >= sec.offsetTop - 180) current = sec.id;
    });
    document.querySelectorAll('.sidebar a, .mobile-bottom-nav a').forEach(a => {
      a.classList.toggle('active', a.getAttribute('href') === `#${current}`);
    });
  });

  async function cargarTodo() {
    for (let i = 0; i < 7; i++) {
      try {
        const res = await fetch(`${DEPLOY_URL}?carpeta=${CARPETAS[i]}`);
        let archivos = await res.json();
        archivos = archivos.filter(f => f.mimeType !== 'application/vnd.google-apps.folder'); // solo archivos (PDFs)
        archivos.sort((a, b) => new Date(b.modifiedTime || 0) - new Date(a.modifiedTime || 0));
        if (archivos.length === 0) {
          contenedores[i].innerHTML = '<p style="grid-column:1/-1;text-align:center;padding:6rem;color:#a9a9a9;font-size:1.4rem">Aún no hay libros en esta sección</p>';
          continue;
        }
        archivos.forEach(f => {
          const nombre = f.name.replace(/\.pdf$/i, '');
          contenedores[i].innerHTML += `
            <div class="card">
              <img src="https://drive.google.com/thumbnail?id=${f.id}&sz=w800" alt="${nombre}"
                   onerror="this.src='https://via.placeholder.com/400x220/003366/ffd700?text=LIBRO'">
              <div class="card-content">
                <h3>${nombre}</h3>
                <div class="btns">
                  <a href="https://drive.google.com/file/d/${f.id}/preview" target="_blank" class="btn ver">LEER</a>
                  <a href="https://drive.google.com/uc?id=${f.id}&export=download" class="btn desc">DESCARGAR</a>
                </div>
              </div>
            </div>`;
        });
      } catch (e) {
        contenedores[i].innerHTML = '<p style="color:#ff0000;text-align:center;padding:4rem">Error al cargar</p>';
      }
    }
    document.getElementById('loading').style.display = 'none';
  }

  cargarTodo();
</script>
</body>
</html>
